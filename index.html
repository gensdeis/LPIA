<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Little Prince Idle Adventure</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div id="gameContainer">
        <canvas id="gameCanvas"></canvas>
        
        <!-- Î≤ÑÏ†Ñ ÌëúÏãú -->
        <div id="version">
            v0.1.4
        </div>
        
        <div id="ui">
            <!-- ÌîåÎ†àÏù¥Ïñ¥ ÏÉÅÌÉú Ìå®ÎÑê -->
            <div id="playerStats" class="ui-panel">
                <h3>ÌîåÎ†àÏù¥Ïñ¥ Ï†ïÎ≥¥</h3>
                <div>Î†àÎ≤®: <span id="playerLevel">1</span></div>
                <div>Ï†ÑÌà¨Î†•: <span id="playerPower">100</span></div>
                <div>Î∞©Ïñ¥Î†•: <span id="playerDefense">5</span></div>
                <div>Í≥®Îìú: <span id="playerGold">0</span></div>
                
                <div>HP: <span id="hpText">100/100 (100%)</span></div>
                <div class="stat-bar">
                    <div class="stat-fill hp-bar" id="hpBar"></div>
                </div>
                
                <div>MP: <span id="mpText">100/100 (100%)</span></div>
                <div class="stat-bar">
                    <div class="stat-fill mp-bar" id="mpBar"></div>
                </div>
                
                <div id="shieldDisplay" class="hidden">Shield: <span id="shieldText">0/0 (0%)</span></div>
                <div class="stat-bar hidden" id="shieldBarContainer">
                    <div class="stat-fill shield-bar" id="shieldBar"></div>
                </div>
                
                <div>EXP: <span id="expText">0/100 (0%)</span></div>
                <div class="stat-bar">
                    <div class="stat-fill exp-bar" id="expBar"></div>
                </div>
                
                <div class="skills-section">
                    <h4 class="skills-title">Ïä§ÌÇ¨</h4>
                    <div class="skills-container">
                        <button class="skill-btn" onclick="game.useSkill(1)" id="skill1" title="ÎØ∏ÏÇ¨Ïùº Í≥µÍ≤© (25 MP)">
                            üöÄ <span id="skill1Cooldown"></span>
                        </button>
                        <button class="skill-btn" onclick="game.useSkill(2)" id="skill2" title="Ïâ¥Îìú (20 MP)">
                            üõ°Ô∏è <span id="skill2Cooldown"></span>
                        </button>
                        <button class="skill-btn ultimate" onclick="game.useSkill(3)" id="skill3" title="ÌñâÏÑ± ÌååÍ¥¥ Î†àÏù¥Ï†Ä (60 MP)">
                            ‚≠ê <span id="skill3Cooldown"></span>
                        </button>
                    </div>
                </div>
                
                <div class="potions-section">
                    <h4 class="potions-title">HP Ìè¨ÏÖò</h4>
                    <div class="potions-container">
                        <button class="potion-btn" onclick="usePotion('small')" title="ÏÜåÌòï HP Ìè¨ÏÖò">
                            üß™ <span id="smallPotionCount">0</span>
                        </button>
                        <button class="potion-btn" onclick="usePotion('medium')" title="Ï§ëÌòï HP Ìè¨ÏÖò">
                            üß™ <span id="mediumPotionCount">0</span>
                        </button>
                        <button class="potion-btn" onclick="usePotion('large')" title="ÎåÄÌòï HP Ìè¨ÏÖò">
                            üß™ <span id="largePotionCount">0</span>
                        </button>
                    </div>
                    
                    <div class="auto-potion-settings">
                        <div class="auto-potion-row">
                            <input type="checkbox" id="autoPotionEnabled" onchange="toggleAutoPotion()">
                            <label for="autoPotionEnabled" class="auto-potion-label">Auto Potion</label>
                        </div>
                        <div class="auto-potion-row">
                            <label class="trigger-label">Trigger:</label>
                            <input type="range" id="autoPotionPercent" min="10" max="80" value="50" class="trigger-range" onchange="updateAutoPotionPercent(this.value)">
                            <span id="autoPotionPercentText" class="trigger-text">50%</span>
                        </div>
                        <div class="auto-potion-row">
                            <label class="priority-label">Priority:</label>
                            <select id="autoPotionPriority" onchange="updateAutoPotionPriority()" class="priority-select">
                                <option value="small,medium,large">Small ‚Üí Medium ‚Üí Large</option>
                                <option value="large,medium,small">Large ‚Üí Medium ‚Üí Small</option>
                                <option value="medium,small,large">Medium ‚Üí Small ‚Üí Large</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <div class="action-buttons">
                    <button class="btn" onclick="showRanking()">Îû≠ÌÇπ Î≥¥Í∏∞</button>
                    <!-- Î¨¥Í∏∞ ÏÑ†ÌÉù Î≤ÑÌäº -->
                    <button class="btn weapon-select-btn" onclick="showWeaponSelector()" id="weaponSelectBtn">
                        <span id="weaponSelectIcon">‚öîÔ∏è</span> Î¨¥Í∏∞ ÏÑ†ÌÉù
                    </button>
                </div>
                
                <div class="account-section">
                    <h4 class="account-title">Í≥ÑÏ†ï Í¥ÄÎ¶¨</h4>
                    <div id="accountInfo" class="account-info">
                        Î°úÍ∑∏Ïù∏ÎêòÏßÄ ÏïäÏùå
                    </div>
                    <div class="account-buttons">
                        <button class="btn account-btn" onclick="showLoginModal()" id="loginButton">Î°úÍ∑∏Ïù∏</button>
                        <button class="btn account-btn hidden" onclick="logout()" id="logoutButton">Î°úÍ∑∏ÏïÑÏõÉ</button>
                        <button class="btn account-btn" onclick="resetGame()">Îã§ÏãúÌïòÍ∏∞</button>
                        <button class="btn account-btn" onclick="clearAllData()">Îç∞Ïù¥ÌÑ∞ ÏÇ≠Ï†ú</button>
                    </div>
                </div>
            </div>

            <!-- Î¨¥Í∏∞ ÏÑ†ÌÉù Ìå®ÎÑê -->
            <div id="weaponSelector" class="ui-panel hidden">
                <h3>Î¨¥Í∏∞ ÏÑ†ÌÉù</h3>
                <div class="weapon-choice">
                    <input type="radio" name="weaponType" value="melee" id="meleeWeapon" onclick="selectWeaponType('melee')">
                    <label for="meleeWeapon">‚öîÔ∏è Í∑ºÏ†ë Î¨¥Í∏∞ (Í¥ëÏÑ†Í≤Ä)</label>
                    <div class="weapon-stats">
                        <div>Îç∞ÎØ∏ÏßÄ, Í∑ºÏ†ëÍ±∞Î¶¨</div>
                    </div>
                </div>
                <div class="weapon-choice">
                    <input type="radio" name="weaponType" value="ranged" id="rangedWeapon" onclick="selectWeaponType('ranged')">
                    <label for="rangedWeapon">üî´ ÏõêÍ±∞Î¶¨ Î¨¥Í∏∞ (Î†àÏù¥Ï†ÄÏ¥ù)</label>
                    <div class="weapon-stats">
                        <div>Î™ÖÏ§ëÎ•†: <span id="rangedAccuracy">70%</span></div>
                        <div>ÏπòÎ™ÖÌÉÄ: <span id="rangedCritical">5%</span></div>
                    </div>
                </div>
                <div class="weapon-confirm">
                    <button class="btn weapon-confirm-btn" id="confirmWeaponSelection" onclick="confirmWeaponSelection()">ÏÑ†ÌÉùÌïòÍ∏∞</button>
                </div>
                <div class="weapon-note">
                    ÏÑ†ÌÉùÌïú Î¨¥Í∏∞Îßå ÏÇ¨Ïö©Ìï©ÎãàÎã§
                </div>
            </div>

            <!-- ÌÄòÏä§Ìä∏ Ìå®ÎÑê -->
            <div id="questPanel" class="ui-panel">
                <h3>ÌÄòÏä§Ìä∏</h3>
                <div id="questList"></div>
            </div>

            <!-- Ïù∏Î≤§ÌÜ†Î¶¨ Ïª®ÌÖåÏù¥ÎÑà -->
            <div id="inventoryContainer">
                <!-- Ïù∏Î≤§ÌÜ†Î¶¨ Ìå®ÎÑê -->
                <div id="inventory" class="ui-panel">
                    <h3>Ïû•ÎπÑ</h3>
                    
                    <!-- Î¨¥Í∏∞ ÏÑπÏÖò -->
                    <div class="equipment-section">
                        <span class="equipment-category">Î¨¥Í∏∞</span>
                        <div class="equipment-row weapon-row">
                            <div class="equipment-slot" data-slot="lightsaber" title="Í¥ëÏÑ†Í≤Ä" onclick="showEquipmentDetail('lightsaber')">‚öîÔ∏è</div>
                            <div class="equipment-slot" data-slot="laser" title="Î†àÏù¥Ï†ÄÏ¥ù" onclick="showEquipmentDetail('laser')">üî´</div>
                        </div>
                    </div>
                    
                    <!-- Î∞©Ïñ¥Íµ¨ ÏÑπÏÖò -->
                    <div class="equipment-section">
                        <span class="equipment-category">Î∞©Ïñ¥Íµ¨</span>
                        <div class="equipment-row armor-row-1">
                            <div class="equipment-slot" data-slot="helmet" title="Î®∏Î¶¨" onclick="showEquipmentDetail('helmet')">ü™ñ</div>
                            <div class="equipment-slot" data-slot="shoulder" title="Ïñ¥Íπ®" onclick="showEquipmentDetail('shoulder')">üõ°Ô∏è</div>
                        </div>
                        <div class="equipment-row armor-row-2">
                            <div class="equipment-slot" data-slot="chest" title="ÏÉÅÏùò" onclick="showEquipmentDetail('chest')">üëï</div>
                            <div class="equipment-slot" data-slot="legs" title="ÌïòÏùò" onclick="showEquipmentDetail('legs')">üëñ</div>
                            <div class="equipment-slot" data-slot="boots" title="Ïã†Î∞ú" onclick="showEquipmentDetail('boots')">üë¢</div>
                        </div>
                    </div>
                    
                    <!-- Ïû•Ïã†Íµ¨ ÏÑπÏÖò -->
                    <div class="equipment-section">
                        <span class="equipment-category">Ïû•Ïã†Íµ¨</span>
                        <div class="equipment-row accessory-row">
                            <div class="equipment-slot" data-slot="earring" title="Í∑ÄÍ±∏Ïù¥" onclick="showEquipmentDetail('earring')">üëÇ</div>
                            <div class="equipment-slot" data-slot="necklace" title="Î™©Í±∏Ïù¥" onclick="showEquipmentDetail('necklace')">üìø</div>
                            <div class="equipment-slot" data-slot="ring" title="Î∞òÏßÄ" onclick="showEquipmentDetail('ring')">üíç</div>
                        </div>
                    </div>
                </div>
                
                <!-- Ïù∏Î≤§ÌÜ†Î¶¨ ÌÜ†Í∏Ä Î≤ÑÌäº -->
                <div id="inventoryToggle" onclick="toggleInventoryPanel()" 
                     title="Ïû•ÎπÑ Ìå®ÎÑê ÌÜ†Í∏Ä (Ctrl+I)" 
                     tabindex="0" 
                     role="button" 
                     aria-label="Ïû•ÎπÑ Ìå®ÎÑê ÌÜ†Í∏Ä"
                     onkeydown="if(event.key==='Enter'||event.key===' '){event.preventDefault();toggleInventoryPanel();}">
                    <span class="toggle-arrow">‚óÄ</span>
                </div>
            </div>

            <!-- Ïä§ÌÖåÏù¥ÏßÄ Ï†ïÎ≥¥ Ìå®ÎÑê -->
            <div id="stageInfo" class="ui-panel">
                <h3>Ïä§ÌÖåÏù¥ÏßÄ Ï†ïÎ≥¥</h3>
                <div>ÌòÑÏû¨ Ïä§ÌÖåÏù¥ÏßÄ: <span id="currentStage">1</span></div>
                <div>ÌòÑÏû¨ ÌñâÏÑ±: <span id="currentPlanet">ÏûëÏùÄ ÌñâÏÑ±</span></div>
                
                <div>Boss HP: <span id="bossHpText">1000/1000 (100%)</span></div>
                <div class="stat-bar">
                    <div class="stat-fill boss-bar" id="bossHpBar"></div>
                </div>
                
                <div id="monsterInfo">
                    <div>Î™¨Ïä§ÌÑ∞: <span id="currentMonster">Ïö∞Ï£º Ïä¨ÎùºÏûÑ</span></div>
                    <div>Î†àÎ≤®: <span id="monsterLevel">1</span></div>
                </div>
            </div>
        </div>

        <!-- Îû≠ÌÇπ Î™®Îã¨ -->
        <div id="rankingModal">
            <div class="modal-content">
                <h2>Îû≠ÌÇπ</h2>
                <div>
                    <button class="btn" onclick="showPowerRanking()">Ï†ÑÌà¨Î†• Îû≠ÌÇπ</button>
                    <button class="btn" onclick="showStageRanking()">Ïä§ÌÖåÏù¥ÏßÄ Îû≠ÌÇπ</button>
                    <button class="btn" onclick="showTimeRanking()">ÌîåÎ†àÏù¥ ÏãúÍ∞Ñ Îû≠ÌÇπ</button>
                </div>
                <div id="rankingContent"></div>
                <button class="btn" onclick="closeRanking()">Îã´Í∏∞</button>
            </div>
        </div>

        <!-- Î°úÍ∑∏Ïù∏/ÌöåÏõêÍ∞ÄÏûÖ Î™®Îã¨ -->
        <div id="loginModal" class="modal-wrapper">
            <div class="modal-content login-modal">
                <h2 id="loginTitle">Î°úÍ∑∏Ïù∏</h2>
                <div>
                    <input type="text" id="loginId" placeholder="ÏïÑÏù¥Îîî" class="input-field">
                    <input type="password" id="loginPw" placeholder="ÎπÑÎ∞ÄÎ≤àÌò∏" class="input-field">
                    <div id="loginMessage" class="login-message"></div>
                    <div class="login-buttons">
                        <button class="btn" onclick="login()" id="loginBtn">Î°úÍ∑∏Ïù∏</button>
                        <button class="btn" onclick="toggleRegisterMode()" id="toggleBtn">ÌöåÏõêÍ∞ÄÏûÖ</button>
                        <button class="btn" onclick="closeLoginModal()">Ï∑®ÏÜå</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ï∫êÎ¶≠ÌÑ∞ ÏÉùÏÑ± Î™®Îã¨ -->
        <div id="characterModal" class="modal-wrapper hidden">
            <div class="modal-content character-modal">
                <h2>Ï∫êÎ¶≠ÌÑ∞ ÏÉùÏÑ±</h2>
                <div>
                    <div class="character-field">
                        <label>ÎãâÎÑ§ÏûÑ:</label>
                        <input type="text" id="characterNickname" placeholder="Ï∫êÎ¶≠ÌÑ∞ ÎãâÎÑ§ÏûÑ" class="input-field">
                    </div>
                    
                    <div class="character-field">
                        <label>Ï∫êÎ¶≠ÌÑ∞ ÏÉâÏÉÅ:</label>
                        <div class="color-inputs">
                            <div class="color-input">
                                <label class="color-label">Î™∏:</label>
                                <input type="color" id="bodyColor" value="#4a90e2" class="color-picker">
                            </div>
                            <div class="color-input">
                                <label class="color-label">Ìó¨Î©ß:</label>
                                <input type="color" id="helmetColor" value="#357abd" class="color-picker">
                            </div>
                            <div class="color-input">
                                <label class="color-label">Ïû•ÎπÑ:</label>
                                <input type="color" id="equipmentColor" value="#666666" class="color-picker">
                            </div>
                        </div>
                    </div>
                    
                    <div class="character-field">
                        <label>ÎØ∏Î¶¨Î≥¥Í∏∞:</label>
                        <canvas id="characterPreview" width="100" height="100" class="character-preview"></canvas>
                    </div>
                    
                    <div id="characterMessage" class="character-message"></div>
                    <div class="character-buttons">
                        <button class="btn" onclick="createCharacter()">ÏÉùÏÑ±</button>
                        <button class="btn" onclick="closeCharacterModal()">Ï∑®ÏÜå</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Ïû•ÎπÑ Ï†ïÎ≥¥ Î™®Îã¨ -->
        <div id="equipmentModal">
            <div class="modal-content">
                <h2 id="equipmentTitle">Ïû•ÎπÑ Ï†ïÎ≥¥</h2>
                <div id="equipmentInfo">
                    <div class="equipment-detail">
                        <div class="equipment-icon-large" id="equipmentIconLarge">üìø</div>
                        <div class="equipment-stats">
                            <h3 id="equipmentName">Ïû•ÎπÑ ÏóÜÏùå</h3>
                            <p id="equipmentDescription">Ïû•ÎπÑÍ∞Ä Ïû•Ï∞©ÎêòÏßÄ ÏïäÏïòÏäµÎãàÎã§.</p>
                            <div class="stat-line">
                                <span>Î†àÎ≤®:</span>
                                <span id="equipmentLevel">-</span>
                            </div>
                            <div class="stat-line">
                                <span>Ï†ÑÌà¨Î†•:</span>
                                <span id="equipmentPower">-</span>
                            </div>
                            <div class="stat-line">
                                <span>Î∞©Ïñ¥Î†•:</span>
                                <span id="equipmentDefense">-</span>
                            </div>
                            <div class="stat-line">
                                <span>Îì±Í∏â:</span>
                                <span id="equipmentRarity">-</span>
                            </div>
                            <div class="stat-line">
                                <span>ÌÉÄÏûÖ:</span>
                                <span id="equipmentType">-</span>
                            </div>
                        </div>
                    </div>
                </div>
                <button class="btn" onclick="closeEquipmentModal()">Îã´Í∏∞</button>
            </div>
        </div>
    </div>

    <!-- JavaScript ÌååÏùºÎì§ÏùÑ ÏùòÏ°¥ÏÑ± ÏàúÏÑúÎåÄÎ°ú Î°úÎìú -->
    
    <!-- 1. Í∏∞Î≥∏ ÌÅ¥ÎûòÏä§Îì§ (ÏùòÏ°¥ÏÑ± ÏóÜÏùå) -->
    <script src="js/player.js"></script>
    <script src="js/equipment.js"></script>
    <script src="js/projectile.js"></script>
    <script src="js/monster.js"></script>
    <script src="js/potion.js"></script>
    <script src="js/quest.js"></script>
    
    <!-- 2. ÏãúÏä§ÌÖú ÌÅ¥ÎûòÏä§Îì§ -->
    <script src="js/skill.js"></script>
    <script src="js/konami.js"></script>
    
    <!-- 3. UIÏôÄ Í∏∞Îä• Ìï®ÏàòÎì§ -->
    <script src="js/ui.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/weapon.js"></script>
    <script src="js/rendering.js"></script>
    
    <!-- 4. Í≤åÏûÑ Î°úÏßÅ -->
    <script src="js/game.js"></script>
    
    <!-- Í≤åÏûÑ Ï¥àÍ∏∞Ìôî -->
    <script>
        // Í≤åÏûÑ Ï¥àÍ∏∞Ìôî
        window.addEventListener('load', function() {
            console.log('Game initializing...');
            
            // initGame Ìï®ÏàòÍ∞Ä Ï†ïÏùòÎêòÏñ¥ ÏûàÎäîÏßÄ ÌôïÏù∏
            if (typeof initGame === 'function') {
                initGame();
                console.log('Game initialized successfully');
            } else {
                console.error('initGame function not found');
            }
        });

        // ÌÇ§Î≥¥Îìú Îã®Ï∂ïÌÇ§
        document.addEventListener('keydown', function(e) {
            if (e.ctrlKey && e.key === 'i') {
                e.preventDefault();
                if (typeof toggleInventoryPanel === 'function') {
                    toggleInventoryPanel();
                }
            }
        });
    </script>
</body>
</html> 